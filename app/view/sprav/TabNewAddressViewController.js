/*
 * File: app/view/sprav/TabNewAddressViewController.js
 * Date: Sat Aug 21 2021 10:55:57 GMT+0300 (EEST)
 *
 * This file was generated by Sencha Architect version 3.2.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Ykis.view.sprav.TabNewAddressViewController', {
    extend: 'Ext.app.ViewController',
    alias: 'controller.tabnewaddress',

    onComboboxSelect: function(combo, record, eOpts) {
        // STORE

        var StHouses = Ext.data.StoreManager.get("StHousesOrg");
        var StStreet = Ext.data.StoreManager.get("StStreetOrg");
        var StAddress = Ext.data.StoreManager.get("StAddressOrg");

        //COMBO

        var form = combo.findParentByType('form');
        var  btAddOsmd = Ext.getCmp('btAddOsmd');

        var  newOsmd = form.getForm().findField('newOsmd');
        var  osmd = form.getForm().findField('osmd');


        var  allStreet = form.getForm().findField('allStreet');
        var  cbStreet = form.getForm().findField('street_id');
        var  cbHouse = form.getForm().findField('house_id');
        var  cbAddress = form.getForm().findField('address');

        var  showRaion = Ext.getCmp('showRaion');
        var  showStreet = Ext.getCmp('showStreet');
        //var  showHouses = Ext.getCmp('showHouses');
        var  btAddHouse = Ext.getCmp('btAddHouse');
        var  btAddAddress = Ext.getCmp('btAddAddress');
        var  btAddStreet = Ext.getCmp('btAddStreet');
        var  newStreet = form.getForm().findField('newStreet');
        var  newhouse = form.getForm().findField('newhouse');
        var  nomer = form.getForm().findField('nomer');

        var  chbDeleteAddress = Ext.getCmp('chbDeleteAddress');
        var  fmDeleteAddress = Ext.getCmp('fmDeleteAddress');
        chbDeleteAddress.setVisible(false);
        fmDeleteAddress.setVisible(false);



        //console.log(showRaion);
        var selected = record;


        //LOGIKA

        StStreet.removeAll();
        StHouses.removeAll();
        StAddress.removeAll();
        cbStreet.clearValue();
        cbAddress.clearValue();
        cbHouse.clearValue();
        allStreet.setValue(false);
        btAddAddress.setDisabled(true);
        btAddStreet.setDisabled(true);
        btAddHouse.setDisabled(true);
        cbStreet.setDisabled(false);
        cbHouse.setDisabled(true);
        cbAddress.setDisabled(true);
        showRaion.setText(selected.data.raion ).show();
        showStreet.setText(selected.data.raion ).hide();
        //   showHouses.setText(selected.data.raion ).hide();
        newhouse.setValue("");
        nomer.setValue("");
        newStreet.setValue("");
        newOsmd.setValue("");
        newOsmd.setDisabled(true);
        btAddOsmd.setDisabled(true);
        osmd.setDisabled(true);
        osmd.setValue(false);

        StStreet.load({
            params: {
                what:'StreetsFromRaion',
                what_id: selected.data.raion_id
            },
            scope: this
        });

    }

});
